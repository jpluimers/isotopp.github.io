<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Cnews in Betrieb nehmen | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">
<link rel="canonical" href="https://blog.koehntopp.info">


<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">




<meta name="generator" content="Hugo 0.101.0" />
<meta property="og:title" content='Cnews in Betrieb nehmen' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />


<meta property="og:locale" content="de_DE" />


<meta name="description" content='' />
<meta property="og:description" content='' />

<link rel="canonical" href="https://blog.koehntopp.info" />
<meta property="og:url" content="https://blog.koehntopp.info" />


<meta property="og:type" content="article" />
<meta name="article:published_time" content='1995-11-01T09:00:00Z' />



<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content='@isotopp' />
<meta name="twitter:creator" content='@isotopp' />
<meta property="twitter:title" content='Cnews in Betrieb nehmen' />
<meta property="twitter:description" content='' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />

<script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebSite","description":null,"headline":"Cnews in Betrieb nehmen","image":"/assets/img/background/rijksmuseum.jpg","name":"Die wunderbare Welt von Isotopp","url":"https://blog.koehntopp.info"}
</script>

    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.731532d47a51fed497cc74301e50720b3c56d09404efc36b4fa1a4117a6aa10e.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            




<div class="page">
  <article class="cnews-in-betrieb-nehmen-page">
    <div class='row  justify-content-center text-center my-4 mx-0'>
      <header>
        <div class='col'>
          <h1 class="title mb-lg-4 text-white">
            Cnews in Betrieb nehmen
          </h1>
          <div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
            <img alt='isotopp image' src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
            <a href="https://twitter.com/isotopp" class='text-light text-decoration-none'>
                Kristian Köhntopp
            </a>

            
              <span class='d-none d-lg-inline'>-</span>
              <div class='d-block d-lg-inline'>November 1, 1995</div>
            

          </div>
        </div>
        
          <img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
        
      </header>
    </div>

    <div class='row justify-content-center mx-0 mt-5 mb-5'>
      <div class='col-lg-8'>
        <p><strong>Linux Magazin, Heft 11/1995</strong></p>
<h1 id="cnews-in-betrieb-nehmen">
    <a href="#cnews-in-betrieb-nehmen">
	Cnews in Betrieb nehmen
    </a>
</h1>
<p><strong>Ein Cnews in Betrieb zu nehmen ist schon nicht ganz einfach, wenn man die
originalen Quelltexte hat und den Installationsanweisungen des Autors, Henry
Spencer von der Universität Toronto, folgt. Aber in der Slackware, die
mit der Infomagic Developers Ressource vom März 1995 geliefert wird,
sind noch einige zusätzliche Haken und Ösen eingebaut. Dieser Text
beschreibt, wie ich mein Cnews von dieser CD zum Laufen bekommen
habe.</strong></p>
<p>Eigentlich bin ich ja kein Dosen-Benutzer, aber durch eine Verkettung
unglücklicher Umstände und fehlende Treiber war ich gezwungen,
etwas über ein Jahr mit MS-DOS und Crosspoint zuzubringen. Irgendwann
Mitte des Jahres hatte ich dann die Zusammenbrüche der Messagebase und
das Warten beim Einsortieren der Artikel satt. Ich beschloß, mir
wieder ein Linux und ein Cnews zu installieren, damit ich meine News endlich
wieder mit Gottes eigenem Newsreader lesen kann.
Eine Infomagic Developers Ressource ist günstig zu bekommen und die
Slackware darauf sollte eine gut getestete Standarddistribution sein.</p>
<p>Soweit die Theorie. In der Praxis bin ich bei der Installation des
Cnews-Paketes von dieser CD in eine ganze Reihe kleine Fallen gelaufen, die
offenbar nicht nur mich Nerven gekostet haben. Ich habe keine Ahnung, warum
das Cnews auf dieser Distribution so bissig ist (Nehmt Ihr alle INN?), aber
man kann es in den Griff bekommen.</p>
<p>Gleich der erste Fehler, der mir bei der Slackware in die Arme lief, waren
die Zugriffsrechte auf den Temporärverzeichnissen: Mein
<code>/var/tmp</code> hatte die Zugriffsrechte <code>755</code> und gehörte
<code>root.root</code>. Mit diesen Rechten muß nicht nur Cnews
Fehlermeldungen ausspucken, sondern jedes andere Programm, das ebenfalls mit
diesem Verzeichnis arbeitet, funktioniert nur für den Systemverwalter.</p>
<p>Hier sind die korrekten Zugriffsrechte für diese Verzeichnisse:</p>
<pre tabindex="0"><code>root@white:~# ls -ld /tmp /var/tmp /usr/tmp
drwxrwxrwt   3 root     root         1024 Jul 20 16:43 /tmp
lrwxrwxrwx   1 root     root            8 Jul  8 14:55 /usr/tmp -&gt; /var/tmp
drwxrwxrwt   2 root     root         1024 Jul 20 08:37 /var/tmp
</code></pre><p>Cnews setzt voraus, daß ein User <code>news</code> existiert. Man sollte
später die Wartung des Newssystems, also das Anlegen und Löschen
von Gruppen und Artikeln, keinesfalls als Systemverwalter machen. <em>Alle
Wartung an Cnews muß immer als news erfolgen!</em> Ich habe dem
<code>news</code>-User der Slackware daher ein Homeverzeichnis und ein
Paßwort gegeben:</p>
<pre tabindex="0"><code>root@white:~# grep news /etc/passwd
news:deletedforsafety:9:13:white.schulung.netuse.de news:/var/lib/news:

root@white:~# ls -ld /usr/lib/news
lrwxrwxrwx   1 root     root           13 Jul  9 22:27 /usr/lib/news -&gt;; /var/lib/news
</code></pre><p>Die Paßwortdatei sollte man vor der Änderung sichern, danach kann
man die betreffende Zeile dann leicht mit einem Editor anpassen und die
Änderungen mit einem <code>diff</code> zwischen der gesicherten und der
geänderten Version prüfen. Das Homeverzeichnis von <code>news</code>
ist bei mir das Verzeichnis mit den Konfigurationsdateien des Newspaketes,
<code>/var/lib/news</code>. Als ich mit UNIX angefangen habe, gab es noch keine
<code>/var</code>-Verzeichnisse und so bin ich <code>/usr/lib/news</code> als
Verzeichnis gewohnt. Also habe ich mir ein Symlink von
<code>/usr/lib/news</code> nach <code>/var/lib/news</code> installiert - die Macht
der Gewohnheit.</p>
<p>Außer diesem Konfigurationsverzeichnis hat Cnews auch noch
verschiedene Hilfsprogramme. Diese verstecken sich in den
Unterverzeichnissen von <code>/usr/lib/news/bin</code> (in <code>/usr</code>, weil
dies statische Dateien sind, im Gegensatz zu den veränderlichen
Konfigurationsdateien). Diese Dateien gehören alle <code>root</code>, damit
sie per NFS und mit <code>root_squash</code> exportiert werden können.
Leider macht die einzig notwendige Ausnahme, <code>relaynews</code>, diesen
Sicherheitsgewinn bei einem NFS-Export wieder zunichte&hellip;</p>
<p>An einigen der Programme unterhalb von <code>/usr/lib/newsbin</code> habe ich
mich vergriffen, damit das Newssystem so funktioniert, wie ich mir das
vorgestellt habe. Im Einzelnen waren die Änderungen:</p>
<pre tabindex="0"><code>news@white:/usr/lib/newsbin$ find . -type f -mtime -100 -print
./ctl/newgroup
./maint/newsdaily
./maint/junkgroups
./inject/pnews
</code></pre><p>Die Änderungen waren folgendermaßen:</p>
<dl>
<dt><code>ctl/newgroup</code>:</dt>
<dd>Automatische Erzeugung neuer Newsgroups komplett abgeschaltet. Das ist am Anfang nicht weiter wichtig.</dd>
<dt><code>maint/newsdaily</code>:</dt>
<dd>Dieses Programm soll einmal am Tag ablaufen, um Cnews Statusreports zu erzeugen. Wegen eines Problems mit der <code>bash</code> hat das Programm aber leider den Report vor dem Versenden gelöscht. Am Anfang des Scriptes ist eine Zeile mit &ldquo;<code>trap</code>&rdquo;. Ich habe sie brutal auskommentiert.</dd>
<dt><code>maint/junkgroups</code>:</dt>
<dd>Das ist ein kleines Script, das ich mir geschrieben habe, um das Logbuch von Cnews nach nichtexistierenden Gruppen zu durchsuchen. Es erzeugt eine Liste der fehlenden Gruppen, damit ich sie dann anlegen kann.</dd>
<dt><code>inject/pnews</code>:</dt>
<dd><code>pnews</code> ist das Programm, mit dem neue Artikel in das Newssystem eingespielt werden können. Es erzeugt keine &ldquo;<code>Lines:</code>&quot;-Headerzeile für neue Artikel. Der <code>Lines</code>-Header ist zwar optional und Cnews entscheidet sich zu Recht dazu, nur minimale Header zu erzeugen, aber <code>nn</code> funktioniert besser, wenn der <code>Lines</code>-Header vorhanden ist.</dd>
</dl>
<p>Es genügt, <code>pnews</code> in den Editor zu laden und nach dem Text &ldquo;<code>Lines</code>&rdquo; zu suchen. Dort befinden sich Anweisungen, wie man die Erzeugung von<code> Lines</code>-Zeilen aktivieren kann.</p>
<p>Keine dieser Änderungen war kritisch. Es sind mehr Schönheitskorrekturen. Wichtiger sind stattdessen die Steuerdateien von Cnews. Sie befinden sich wie gesagt in <code>/var/lib/news</code>. Im Unterverzeichnis <code>bin</code> steht dort eine Datei <code>config</code>. Sie enthält einen Haufen Informationen, die die Shellscripte von Cnews benötigen. Diese Informationen müssen genau mit den Steuerinformationen des restlichen Newssystems übereinstimmen oder Cnews stellt die Arbeit kommentarlos ein. Daher darf diese Datei niemals verändert werden. Leider hatte sie jemand verändert, jedenfalls war sie schon auf der CD falsch. Hier ist die korrekte <code>/usr/lib/news/bin/config</code>:</p>
<pre tabindex="0"><code># configuration -- all the shell files pick this up using &#34;.&#34;
# this makes it possible to add new variables here and have them
#  available everywhere immediately
#
# This is not, repeat NOT, a master control file for all of C News.
# This is the shell equivalent of libcnews/config.c, a &#34;subroutine
# library&#34; that gives shell files access to the default settings and
# lets environment variables override the defaults.  Changing the
# defaults here will *NOT* change them throughout C News.
#
# =()&lt;NEWSCTL=${NEWSCTL-@&lt;NEWSCTL&gt;@}&gt;()=
NEWSCTL=${NEWSCTL-/var/lib/news}
# =()&lt;NEWSBIN=${NEWSBIN-@&lt;NEWSBIN&gt;@}&gt;()=
NEWSBIN=${NEWSBIN-/usr/lib/newsbin}
# =()&lt;NEWSARTS=${NEWSARTS-@&lt;NEWSARTS&gt;@}&gt;()=
NEWSARTS=${NEWSARTS-/var/spool/news}
# =()&lt;NEWSPATH=${NEWSPATH-@&lt;NEWSPATH&gt;@}&gt;()=
NEWSPATH=${NEWSPATH-/bin:/usr/bin:/usr/sbin:/sbin}
# =()&lt;NEWSUMASK=${NEWSUMASK-@&lt;NEWSUMASK&gt;@}&gt;()=
NEWSUMASK=${NEWSUMASK-002}
# =()&lt;NEWSMASTER=${NEWSMASTER-@&lt;NEWSMASTER&gt;@}&gt;()=
NEWSMASTER=${NEWSMASTER-news}
# =()&lt;NEWSCONFIG=${NEWSCONFIG-@&lt;NEWSCONFIG&gt;@}&gt;()=
NEWSCONFIG=${NEWSCONFIG-/var/lib/news/bin/config}
</code></pre><p>Jetzt kann man daran gehen, den Rest des Newssystems zu konfigurieren. Als erstes muß die Identität des Systems korrekt eingestellt werden: In den Dateien <code>whoami</code> und <code>mailname</code> muß der komplette Name des eigenen Systems inklusive Domain eingetragen werden. Da mein System den Namen <code>white.schulung.netuse.de</code> trägt, habe ich also diese Namen eingesetzt:</p>
<pre tabindex="0"><code>news@white:~$ cat whoami
white.schulung.netuse.de
news@white:~$ cat mailname
white.schulung.netuse.de
</code></pre><p>Leider steht hier im <code>NEWS-HOWTO</code> und in der Anleitung von Cnews, daß man in <code>whoami</code> den kurzen UUCP-Namen des Systems ohne Domain eintragen sollte. Das darf man nur dann, wenn dieser Name auch in der weltweiten USENET/UUCP Map für einen selbst reserviert ist und garantiert weltweit eindeutig ist. Das ist in der Regel nicht der Fall und daher sollte man <em>unbedingt</em> den Domainnamen einsetzen.</p>
<p>Der nächste Handgriff gilt der Datei <code>organization</code>, die den Inhalt der gleichnamigen Headerzeile darstellt. In dieser einzeiligen Datei soll die eigene Organisation möglichst kurz und prägnant beschrieben werden.</p>
<pre tabindex="0"><code>news@white:~$ cat organization
My personal Linux in Kiel, Germany.
</code></pre><p>Die dritte, relativ statische Konfigurationsdatei betrifft moderierte Newsgroups: In eine moderierte Gruppe kann man nicht direkt schreiben. Stattdessen wird der eigene Artikel an einen Moderator gesendet, der wie ein Redakteur bei einer Zeitung den Artikel begutachtet. Der Moderator gibt den Artikel dann entweder zur Veröffentlichung in seiner Newsgroup frei (er erscheint mit dem Namen des Originalautors) oder bittet den originalen Autor um Korrekturen. Die Datei <code>mailpaths</code> enthält eine Liste von moderierten Newsgroups und Moderatoren. Für den Anfang genügt es, alle Gruppen von einem zentralen Knoten abhandeln zu lassen. Dieser wird die Artikel dann nach Bedarf weiterleiten.</p>
<p>Das genaue Format der Datei mailpaths ist in einem Artikel beschrieben, der von David C. Lawrence regelmäßig in den internationalen Gruppen <code>news.lists</code>,<code>news.admin.misc</code> und <code>news.answers </code>unter dem Titel &ldquo;How to Construct the Mailpaths File&rdquo; veröffentlicht wird.  Aber für den Anfang genügt es, dort den Text</p>
<pre tabindex="0"><code>news@white:~$ cat mailpaths
backbone     uunet.uu.net!%s
</code></pre><p>einzutragen. Nachdem diese vier kleinen Konfigurationsdateien einmal aufgesetzt worden sind, kann man sie erst einmal vergessen. Die folgenden Steuerdateien sind wichtiger. Sie benötigen im Laufe der Existenz eines Newssystems wahrscheinlich gelegentlich Anpassungen, wenn weitere Gruppen eingerichtet werden oder wenn die Festplatte volläuft. Die erste dieser zentralen Konfigurationsdateien ist die Datei <code>sys</code>. Sie legt fest, welche Newsgroups wir überhaupt akzeptieren und an wen wir Newsgroups weiterleiten.</p>
<pre tabindex="0"><code>news@white:~$ cat sys
# Diese Zeile zeigt an, welche Newsgroups wir überhaupt akzeptieren:
# Wir nehmen jeden Müll an. Warum Streß machen...
ME:all,all.all

# Artikel, die wir auf unserem System neu erzeugen, werden an den
# Rechner weitergeleitet, der uns mit News versorgt. Im Beispiel heißt
# dieser Rechner nuki. nuki verewigt sich im Pfad als nuki.netuse.de.
#
# Also senden wir nur diejenigen Artikel an nuki, die noch nicht
# nuki.netuse.de in der Path-Zeile stehen haben:
#	nuki/nuki.netuse.de:
#
# Wir möchten, daß alle Artikel in allen Gruppen an nuki weitergeleitet
# werden mit Ausnahme der lokalen Gruppen, die den Namen white.irgendwas
# haben:
#    all,all.all,!white.all
#
# Artikel können eine Zeile Distribution enthalten, die die Verbreitung
# räumlich einschränkt. Wir leiten alle Distributionen an nuki weiter, aber
# nicht local und auch nicht white.
#    all,!white,!local
#
# Tja und dann wollen wir noch Standardbatching haben:
# 	:f:
#
# Es ergibt sich diese Zeile in der Konfigurationdatei:
#
nuki/nuki.NetUSE.de:all,all.all,!white.all/all,!white,!local:f:
</code></pre><p>Alle Zeilen mit &ldquo;#&rdquo; in dieser Datei sind selbstverständlich Kommentare. Sie können gerne weggelassen werden. Neu erzeugte Artikel müssen natürlich irgendwann einmal verpackt und an <code>nuki.netuse.de</code> weitergeleitet werden. Wie das geschieht, steuert die Datei <code>batchparms</code>. Sie muß für jedes System, an das wir senden wollen, einen Eintrag enthalten:</p>
<pre tabindex="0"><code>news@white:~$ cat batchparms
# big batches for fast modem (ISDN!), simple compression
# site          size    queue   builder muncher sender
# ----          ----    -----   ------- ------- ------
nuki            500000  20      batcher compcun viauux
</code></pre><p>So, jetzt können wir daran gehen, einen Spoolbereich für News einzurichten und danach können dann Gruppen erzeugt werden. Standardmäßig sieht es bei der Slackware so aus:</p>
<pre tabindex="0"><code>news@white:~$ cd /usr/spool/news
news@white:/usr/spool/news$ ls
news@white:/usr/spool/news$
</code></pre><p>Nichts da. Für jede Gruppe in der Datei <code>~news/active</code> muß hier ein passendes Unterverzeichnis angelegt werden. Außerdem brauchen wir noch einige Spezialverzeichnisse.</p>
<pre tabindex="0"><code>news@white:/usr/spool/news$ cat ~news/active
junk 000000001 00001 y
control 000000001 00001 y
news.announce.newusers 000000001 00001 y
news@white:/usr/spool/news$ mkdir -p news/announce/newusers junk control
news@white:/usr/spool/news$ mkdir in.coming in.coming/bad out.going out.going/nuki out.master
</code></pre><p>Statt nuki und nuki.netuse.de müssen natürlich die Namen des eigenen Feeds als Verzeichnisnamen eingesetzt werden. Aber zurück in das Verzeichnis <code>~news</code>: Im Laufe des Lebens des Newssystems wird man sich öfter als User <code>news</code> einloggen müssen. Also sollte man diesem Benutzer in seinem Home eine vernünftige <code>.profile</code> verpassen. Hier ist eine:</p>
<pre tabindex="0"><code>news@white:~$ cat .profile
echo &#34;.profile&#34;
PATH=/bin:/usr/bin:/usr/local/bin:/usr/sbin:/sbin:/usr/lib/newsbin/maint:/usr/lib/newsbin/expire:/usr/lib/newsbin/input:/usr/lib/newsbin/batch
</code></pre><p>Diese Pathangabe ist ziemlich lang, aber sie vereinfacht die Wartung des Newssystems. Nach dem Einlesen der <code>.profile</code>-Datei kann man sich dann daran machen, Newsgroups anzulegen:</p>
<pre tabindex="0"><code>news@white:~$ . .profile
news@white:~$ echo $PATH
/bin:/usr/bin:/usr/local/bin:/usr/sbin:/sbin:/usr/lib/newsbin/maint:/usr/lib/newsbin/expire:/usr/lib/newsbin/input:/usr/lib/newsbin/batch
news@white:~$ addgroup gewuenschte.name.fuer.die.gruppe y
</code></pre><p>Mit dem Kommando <code>addgroup</code> kann man neue Newsgroups anlegen. Auf jeden Fall sollte man sich eine lokale Gruppe zum Testen anlegen. Diese Gruppe sollte <em>nicht</em> nach draußen exportiert werden. Im Beispiel oben ist die Gruppenhierarchie <code>white.all</code> schon dafür vorbereitet worden. Also kann man gefahrlos eine Gruppe <code>white.test</code> anlegen:</p>
<pre tabindex="0"><code>news@white:~$ addgroup white.test y
</code></pre><p>Weiterhin möchte man natürlich Newsgroups anlegen, die man von seinem Feed bestellt hat. Am einfachsten geht das, indem man eine Datei anlegt, in der diese Gruppen aufgezählt sind, jeweils ein Name pro Zeile. Im Beispiel enthält die Datei <code>x</code> eine solche Liste. Wir zeigen nur den Kopf dieser Liste, um Platz zu sparen:</p>
<pre tabindex="0"><code>news@white:~$ head x
alt.fan.pratchett
alt.tv.babylon-5
cau.ifi.apply.eulisp
cau.ifi.archive
cau.ifi.fragen
cau.ifi.general
cau.ifi.inf
cau.ifi.statistic
cau.ifi.termine
cau.inf
news@white:~$ cat x | xargs -i addgroup {} y
</code></pre><p>Das Kommando <code>xargs</code> sorgt dafür, daß sein Parameter <code>addgroup</code> für jede Zeile der Standardeingabe einmal ausgeführt wird. Es wird also für jede Zeile der Datei <code>x</code> ein <code>addgroup</code>-Kommando gestartet. Nachdem dies abgeschlossen ist (es dauert eine gewisse Zeit), könnten im Prinzip schon News eingespielt werden. Wir möchten jedoch auch, daß diese Artikel nach einer gewissen Zeit wieder verschwinden. Daher muß auch noch konfiguriert werden, in welcher Gruppe die Artikel wieviele Tage verbleiben sollen. Die Steuerdatei, die dies regelt, ist die Datei <code>explist</code>:</p>
<pre tabindex="0"><code>news@white:~$ cat explist
# Die Reihenfolge der Zeilen in dieser Datei ist wichtig!

# Die History bleibt 14 Tage erhalten. Kein Artikel bleibt länger
# als 90 Tage
/expired/                       x       14      -
/bounds/                        x       0-1-90  -

# Artikel in control bleiben 7 Tage, junk geht nach 1 Tag weg
control                         x       3       -
junk                            x       1       -
# Alle anderen Artikel verschwinden nach 7 Tagen
all                             x       7       -
</code></pre><p>Wenn man auch damit durch ist, kann das System endlich auf Autopiloten gestellt werden. Daztu muß eine Datei <code>crontab.news</code> im Homeverzeichnis von news erzeugt werden. Sie sollte so aussehen:</p>
<pre tabindex="0"><code># Auspacken von neu eingegangenen News
0,10,20,30,40,50 *  * * * /usr/lib/newsbin/input/newsrun

# Einpacken von lokal erstellten News
25 * * * * /usr/lib/newsbin/batch/sendbatches

# Wegschmeissen von ueberalterten Artikeln
59 0  * * * /usr/lib/newsbin/expire/doexpire
# Nur fuer NN-Benutzer: nnmaster wecken!
# 59 2  * * * /usr/bin/nnadmin =eyw

# Systemüberwachung
10 5  * * * /usr/lib/newsbin/maint/newsdaily
00 5  * * * /usr/lib/newsbin/maint/newswatch

# Nur fuer NN-Benutzer: Sichern der Active-Dateien und erstellen
# der Subject-Datenbank
#59 3  * * * /usr/lib/nn/nnspew
#29 3  * * * /usr/lib/nn/back_act
</code></pre><p>Die auskommentierten Zeilen sind nur wichtig, wenn der Newsreader nn verwendet wird. In diesem Fall müssen sie aktiviert werden, d.h. die Kommentarzeichen müssen gelöscht werden. Die Crontab-Datei wird mit dem Kommando¯</p>
<pre tabindex="0"><code>news@white:~$ crontab crontab.sample
</code></pre><p>installiert und kann mit dem Kommando</p>
<pre tabindex="0"><code>news@white:~$ crontab -l
</code></pre><p>geprüft werden. Die Crontab regelt, wann am Tag das Programm cron bestimmte Tätigkeiten ausführt. So bedeutet die Zeile</p>
<pre tabindex="0"><code>59 0  * * * /usr/lib/newsbin/expire/doexpire
</code></pre><p>aus der Crontab oben zum Beispiel, daß jeden Tag um 0 Uhr 59 das Programm <code>doexpire</code> gestartet werden soll, um alte Artikel zu löschen. Das funktioniert natürlich nur dann, wenn der Rechner um diese Zeit auch sicher angeschaltet ist. UNIX-Rechner haben in der Regel viele solche Cronjobs, die des Nachts alle wichtigen, aber unangenehmen Aufgaben erledigen. Daher sollte man den Rechner ruhig rund um die Uhr durchlaufen lassen und ihn um diese Zeit News und Mail holen lassen. Wenn man dies nicht machen kann, etwa weil der Rechner zu laut ist, dann muß man die Zeiten in der Crontab auf passende Zeiten anpassen.</p>
<p>Jetzt können wir daran gehen, das System zu testen:</p>
<pre tabindex="0"><code>news@white:~$ inews -n white.test -t &#34;Testing&#34; -d local
Yummy Yummy Yummy
^D
news@white:~$
</code></pre><p>Dies sollte eine Datei in in.coming erzeugen:</p>
<pre tabindex="0"><code>news@white:~$ cd /usr/spool/news/in.coming/
news@white:/usr/spool/news/in.coming$ ls
0.1435483580.t  bad
news@white:/usr/spool/news/in.coming$ cat 0.1435483580.t
Newsgroups: white.test
Path: news
From: news@white.schulung.netuse.de (Kristian Koehntopp)
Subject: Testing
Distribution: local
Organization: My personal Linux in Kiel, Germany.
Message-ID: &lt;DC0tuC.70H@white.schulung.netuse.de&gt;
Date: Thu, 20 Jul 1995 15:32:34 GMT
Lines: 1

Yummy Yummy Yummy
</code></pre><p>Dabei sind folgende Dinge zu beachten:</p>
<p>Die <code>Path:</code>-Zeile sollte nur den Namen des Absender enthalten. Die Absenderadresse sollte korrekt sein, also in der <code>From:</code>-Zeile den User <code>news</code> mit einem vollständigen Domainnamen zeigen. Die Zeilen <code>Newsgroups:</code> und <code>Distribution:</code> müssen so aussehen, wie mit den Optionen <code>-n</code> und <code>-d</code> gefordert. Das <code>Subject:</code> sollte so aussehen, wie mit <code>-t</code> vorgegeben. Das Datum sollte stimmen und in GMT angezeigt werden (Stimmt die Zeitzonenanpassung?). Und schließlich sollte auch eine <code>Lines:</code>-Headerzeile angezeigt werden und die korrekte Zeilenzahl angeben.</p>
<p>Wenn das alles stimmt, kann der Benutzer <code>news</code> (und nur <code>news</code>, <em>niemals</em> ein anderer!) das Kommando <code>newsrun</code> aufrufen. Das dauert in etwa eine Minute, weil in <code>newsrun</code> ein &ldquo;<code>sleep 45</code>&rdquo; enthalten ist.</p>
<pre tabindex="0"><code>news@white:/usr/spool/news/in.coming$ which newsrun
/usr/lib/newsbin/input/newsrun
news@white:/usr/spool/news/in.coming$ newsrun
^Z
[1]+  Stopped                 newsrun
news@white:/usr/spool/news/in.coming$ bg
[1]+ newsrun &amp;
</code></pre><p>Im Logbuch muß jetzt ein Eintrag zu finden sein:</p>
<pre tabindex="0"><code>news@white:/usr/spool/news/in.coming$ cd
news@white:~$ tail -2 log
Jul 20 16:39:50.000 nuki.NetUSE.de + &lt;3uljtj$fb4@picard.toppoint.de&gt;
Jul 20 17:35:52.000 white.schulung.netuse.de + &lt;DC0tuC.70H@white.schulung.netuse.de&gt;
</code></pre><p>Der letzte Eintrag zeigt an, daß der Artikel erfaßt und akzeptiert worden ist. Wir sehen ihn uns an:</p>
<pre tabindex="0"><code>news@white:~$ ls -l /usr/spool/news/white/test/
total 1
-rw-r--r--   1 news     news          237 Jul  9 23:10 1
</code></pre><p>Das ist er. Durch das Einspielen in das Newssystem haben sich einige Headerzeilen (zum Beispiel der <code>Path:</code>) etwas verändert. Das ist normal. Der nächste Schritt im Test ist es, einen Artikel zu erzeugen, der den unseren Feed weitergegeben wird:</p>
<pre tabindex="0"><code>news@white:~$ inews -n nuki.test -t &#34;Testing&#34;
Yummy Yummy Yummy
^D
</code></pre><p>Dies ist kein Artikel mit der Distribution &ldquo;<code>local</code>&rdquo; und er ist nicht in einer lokalen Gruppe. Also sollte er an <code>nuki</code> weitergegeben werden:</p>
<pre tabindex="0"><code>news@white:~$ newsrun &amp;
[1] 9177
news@white:~$ cd /usr/spool/news/out.going/nuki/
news@white:/usr/spool/news/out.going/nuki$ ls -l
total 1
-rw-rw-r--   1 news     news           15 Jul 20 17:38 togo
news@white:/usr/spool/news/out.going/nuki$ cat togo
nuki/test/1 264
</code></pre><p>Das <code>newsrun</code> hat den Artikel wieder in das Newssystem übernommen. Außer der Installation der Artikeldatei in <code>/usr/spool/news/nuki/test</code> ist aber noch etwas anderes passiert: In <code>.../out.going/nuki</code> ist eine Datei <code>togo</code> angelegt worden. Sie enthält ein Logbuch der noch zu packenden Artikel für das System <code>nuki</code>. Die Zahl hinter dem Artikelnamen ist die Länge des Artikels in Byte. Das Programm <code>sendbatches</code> wird die Datei togo einlesen und einen UUCP-Job für nuki erzeugen:</p>
<pre tabindex="0"><code>news@white:/usr/spool/news/out.going/nuki$ sendbatches
^Z
[2]+  Stopped                 sendbatches
news@white:/usr/spool/news/out.going/nuki$ ls -l
total 3
-rw-rw-r--   2 news     news            5 Jul 20 17:40 L.9215
-rw-rw-r--   2 news     news            5 Jul 20 17:40 LOCKbatch
-rw-rw-r--   1 news     news            0 Jul 20 17:40 togo
-rw-rw-r--   1 news     news           15 Jul 20 17:40 togo.1
news@white:/usr/spool/news/out.going/nuki$ bg
[2]+ sendbatches &amp;
news@white:/usr/spool/news/out.going/nuki$ ls -l
total 0
-rw-rw-r--   1 news     news            0 Jul 20 17:40 togo
[2]+  Done                    sendbatches
news@white:/usr/spool/news/out.going/nuki$ uustat -s nuki
nukid0294 nuki news 07-20 17:40 Executing rnews (sending 246 bytes)
</code></pre><p>Im Beispiel ist <code>sendbatches</code> schon sehr kurz nach dem Aufruf mit <code>^Z</code> gestoppt worden. Man kann deutlich sehen, wie das Newssystem während der Erzeugung der Batches Lockdateien erzeugt, um den Zugriff auf die Daten zu regulieren. Wird die Ausführung von <code>sendbatches</code> mit <code>bg</code> im Hintergrund freigegeben, verschwinden die Locks und die <code>togo</code>-Datei leert sich. Stattdessen entsteht ein UUCP-Job für das System <code>nuki</code>. Mit dem nächsten Start von UUCP verschwindet dieser Job in Richtung Feed.</p>
<p>Damit sollte das Newssystem jetzt sicher laufen.</p>
<p>Cnews kommt mit einer umfangreichen englischen Dokumentation. Bei der Slackware steht sie in <code>/usr/doc/cnews</code> bereit, ist allerdings nicht formatiert. Um die Dokumentation zubereiten zu können, benötigt man bei der Slackware das Paket <code>pmake</code> (GNU make tut es nicht) und das Paket <code>groff</code> inklusive der zugehörigen Zeichensätze.</p>
<p>Wenn beide Pakete installiert sind, sollte es genügen, im entsprechenden Verzeichnis &ldquo;<code>pmake</code>&rdquo; aufzurufen. Dabei sollte <code>root</code> für die Dauer des <code>pmake</code>-Aufrufes (und nur für die Dauer des <code>pmake</code>-Aufrufes!) das Verzeichnis &ldquo;<code>.</code>&rdquo; im Suchpfad haben. Sollte es dabei zu Fehlermeldungen kommen, die besagen, daß das &ldquo;<code>ms</code>&rdquo; Makropaket nicht gefunden werden kann, kann man stattdessen <code>tmac.cn</code> verwenden. Dazu ist die Datei tmac.cn nach <code>/usr/lib/groff/tmac/tmac.s</code> zu kopieren. <code>tmac.cn</code> ist kein richtiger Ersatz für <code>tmac.s</code>, aber es ist kompatibel genug, um die Dokumentation zu übersetzen. Während der Übersetzung der Dokumentation hagelt es einige Warnmeldungen, aber diese sind unkritisch.</p>
<p>Die resultierenden Postscript-Dateien können ausgedruckt werden oder mit <code>ghostview</code> oder Ghostscript angesehen werden. Die wichtigen Informationen stehen in der Datei <code>guide.ps</code>.</p>
<pre tabindex="0"><code>root@white:/usr/doc/cnews/docs# ls -l *ps
-rw-r--r--   1 root     root       310197 Jul 21 11:42 guide.ps
-rw-r--r--   1 root     root        29305 Jul 21 11:43 index.ps
-rw-r--r--   1 root     root         5312 Jul 21 11:43 toc.ps
</code></pre><p>Es ist auch möglich, eine ASCII-Version der <code>guide</code>-Datei zu erzeugen. Dazu ist das Kommando</p>
<pre tabindex="0"><code>root@white:/usr/doc/cnews/docs# pmake guide.out
root@white:/usr/doc/cnews/docs# ls -l guide.out
-rw-r--r--   1 root     root       223706 Jul 21 11:47 guide.out
</code></pre><p>aufzurufen. Dabei entsteht eine ganze Menge Schrott auf dem Bildschirm, der
aber ignoriert werden kann. Das Resultat wird eine Datei guide.out sein, die
im aktuellen Verzeichnis steht und eine lesbare ASCII-Version des Guides
enthält.</p>

      </div>
    </div>

    
    
    <div class='row justify-content-center mb-3 mx-0'>
      <div class='col-lg-8 text-center'>
        <span class='letter-spacing-01 text-uppercase text-secondary me-2'>Share</span>
        <a href='https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.koehntopp.info%2f1995%2f11%2f01%2fcnews-in-betrieb-nehmen.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#facebook'/></svg>
        </a>
        <a href='https://twitter.com/intent/tweet?source=https%3a%2f%2fblog.koehntopp.info%2f1995%2f11%2f01%2fcnews-in-betrieb-nehmen.html&text=Cnews%20in%20Betrieb%20nehmen%20%7C%20Die+wunderbare+Welt+von+Isotopp:%20https%3a%2f%2fblog.koehntopp.info%2f1995%2f11%2f01%2fcnews-in-betrieb-nehmen.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>
        <a href='http://www.reddit.com/submit?url=https%3a%2f%2fblog.koehntopp.info%2f1995%2f11%2f01%2fcnews-in-betrieb-nehmen.html&title=Cnews%20in%20Betrieb%20nehmen' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>
        <a href='mailto:?subject=Cnews%20in%20Betrieb%20nehmen&body=https%3a%2f%2fblog.koehntopp.info%2f1995%2f11%2f01%2fcnews-in-betrieb-nehmen.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope-fill'/></svg>
        </a>
      </div>
    </div>

    
    
    <div class='row justify-content-center py-3 mb-3 mx-0'>
      <div class='col-lg-8 text-center'>
        <span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
        
          <a href="/tags/#lang_de" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            lang_de
          </a>
        
          <a href="/tags/#publication" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            publication
          </a>
        
          <a href="/tags/#internet" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            internet
          </a>
        
      </div>
    </div>

    <div class='row justify-content-center mb-5 pt-5 border-top mx-0'>
      <div class='col-lg-4 text-center text-lg-start'>
        
          <div>
            <div class='letter-spacing-01 text-uppercase text-secondary'>
              Next Post
            </div>
            <a class='text-decoration-none' href="https://blog.koehntopp.info/1995/12/01/init-starten-und-beenden-von-linux.html">init - Starten und Beenden von Linux</a>
          </div>
        
      </div>

      <div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
        
          <div>
            <div class='letter-spacing-01 text-uppercase text-secondary'>
              Previous Post
            </div>
            <a class='text-decoration-none' href="https://blog.koehntopp.info/1995/03/01/datenuebertragung-glossar.html">A Robots Dictionary</a>
          </div>
        
      </div>
    </div>

    
    </article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff. 
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#rss-fill'/></svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope'/></svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#github'/></svg>
        </a>

        <a href='https://www.reddit.com/user/isotopp' title='Follow on Reddit' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>

        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#steam'/></svg>
        </a>

        <a href='https://twitter.com/isotopp' title='Follow on Twitter' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#youtube'/></svg>
        </a>

      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
